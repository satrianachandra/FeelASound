(function(){var t,e,n,s,i,o,a,r,h,l,d,c;o=150,i=128,l=.5,s="https://s3-us-west-2.amazonaws.com/s.cdpn.io/1715/the_xx_-_intro.mp3",r={MIN:5,MAX:80},d={MIN:.2,MAX:1},t={MIN:.8,MAX:.9},c={MIN:.001,MAX:.005},h={MIN:.5,MAX:1.25},n=["#69D2E7","#1B676B","#BEF202","#EBE54D","#00CDAC","#1693A5","#F9D423","#FF4E50","#E7204E","#0CCABA","#FF006F"],e=function(){function t(e,n,s){var i;this.audio=null!=e?e:new Audio,this.numBands=null!=n?n:256,this.smoothing=null!=s?s:.3,"string"==typeof this.audio&&(i=this.audio,this.audio=new Audio,this.audio.controls=!1,this.audio.src=i),this.context=new t.AudioContext,this.jsNode=this.context.createScriptProcessor(2048,1,1),this.analyser=this.context.createAnalyser(),this.analyser.smoothingTimeConstant=this.smoothing,this.analyser.fftSize=2*this.numBands,this.bands=new Uint8Array(this.analyser.frequencyBinCount),this.audio.addEventListener("canplay",function(t){return function(){return t.source=t.context.createMediaElementSource(t.audio),t.source.connect(t.analyser),t.analyser.connect(t.jsNode),t.jsNode.connect(t.context.destination),t.source.connect(t.context.destination),t.jsNode.onaudioprocess=function(){return t.analyser.getByteFrequencyData(t.bands),t.audio.paused?void 0:"function"==typeof t.onUpdate?t.onUpdate(t.bands):void 0}}}(this))}return t.AudioContext=self.AudioContext||self.webkitAudioContext,t.enabled=null!=t.AudioContext,t.prototype.start=function(){return this.audio.play()},t.prototype.stop=function(){return this.audio.pause()},t}(),a=function(){function e(t,e){this.x=null!=t?t:0,this.y=null!=e?e:0,this.reset()}return e.prototype.reset=function(){return this.level=1+floor(random(4)),this.scale=random(r.MIN,r.MAX),this.alpha=random(t.MIN,t.MAX),this.speed=random(d.MIN,d.MAX),this.color=random(n),this.size=random(h.MIN,h.MAX),this.spin=random(c.MAX,c.MAX),this.band=floor(random(i)),random()<.5&&(this.spin=-this.spin),this.smoothedScale=0,this.smoothedAlpha=0,this.decayScale=0,this.decayAlpha=0,this.rotation=random(TWO_PI),this.energy=0},e.prototype.move=function(){return this.rotation+=this.spin,this.y-=this.speed*this.level},e.prototype.draw=function(t){var e,n,s;return n=exp(this.energy),s=this.scale*n,e=this.alpha*this.energy*1.5,this.decayScale=max(this.decayScale,s),this.decayAlpha=max(this.decayAlpha,e),this.smoothedScale+=.3*(this.decayScale-this.smoothedScale),this.smoothedAlpha+=.3*(this.decayAlpha-this.smoothedAlpha),this.decayScale*=.985,this.decayAlpha*=.975,t.save(),t.beginPath(),t.translate(this.x+250*cos(this.rotation*this.speed),this.y),t.rotate(this.rotation),t.scale(this.smoothedScale*this.level,this.smoothedScale*this.level),t.moveTo(.5*this.size,0),t.lineTo(this.size*-.5,0),t.lineWidth=1,t.lineCap="round",t.globalAlpha=this.smoothedAlpha/this.level,t.strokeStyle=this.color,t.stroke(),t.restore()},e}(),Sketch.create({particles:[],setup:function(){var t,n,r,h,d,c,u,p,y,m;for(r=y=0,m=o-1;m>=y;r=y+=1)u=random(this.width),p=random(2*this.height),d=new a(u,p),d.energy=random(d.band/256),this.particles.push(d);if(!e.enabled)return c=document.getElementById("warning1"),c.style.display="block";try{if(t=new e(s,i,l),t.onUpdate=function(t){return function(e){var n,s,i,o;for(i=t.particles,o=[],n=0,s=i.length;s>n;n++)d=i[n],o.push(d.energy=e[d.band]/256);return o}}(this),t.start(),$(".pause").on("click",function(e){e.preventDefault(),t.stop()}),$(".play").on("click",function(e){e.preventDefault(),t.start()}),document.body.appendChild(t.audio),h=document.getElementById("intro"),h.style.display="none",/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))return c=document.getElementById("warning2"),c.style.display="block"}catch(f){n=f}},draw:function(){var t,e,n,s,i;for(this.globalCompositeOperation="lighter",s=this.particles,i=[],e=0,n=s.length;n>e;e++)t=s[e],t.y<-t.size*t.level*t.scale*2&&(t.reset(),t.x=random(this.width),t.y=this.height+t.size*t.scale*t.level),t.move(),i.push(t.draw(this));return i}})}).call(this);